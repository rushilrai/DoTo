/** @license ms-rest-js
  * Copyright (c) Microsoft Corporation. All rights reserved.
  * Licensed under the MIT License. See License.txt and ThirdPartyNotices.txt in the project root for license information.
  */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.msRest={})}(this,function(N){"use strict";function r(e){return e.toLowerCase()}var d=(e.prototype.set=function(e,t){this._headersMap[r(e)]={name:e,value:t.toString()}},e.prototype.get=function(e){var t=this._headersMap[r(e)];return t?t.value:void 0},e.prototype.contains=function(e){return!!this._headersMap[r(e)]},e.prototype.remove=function(e){var t=this.contains(e);return delete this._headersMap[r(e)],t},e.prototype.rawHeaders=function(){var e={};for(var t in this._headersMap){var r=this._headersMap[t];e[r.name.toLowerCase()]=r.value}return e},e.prototype.headersArray=function(){var e=[];for(var t in this._headersMap)e.push(this._headersMap[t]);return e},e.prototype.headerNames=function(){for(var e=[],t=this.headersArray(),r=0;r<t.length;++r)e.push(t[r].name);return e},e.prototype.headerValues=function(){for(var e=[],t=this.headersArray(),r=0;r<t.length;++r)e.push(t[r].value);return e},e.prototype.toJson=function(){return this.rawHeaders()},e.prototype.toString=function(){return JSON.stringify(this.toJson())},e.prototype.clone=function(){return new e(this.rawHeaders())},e);function e(e){if(this._headersMap={},e)for(var t in e)this.set(t,e[t])}function s(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function a(e){for(var t=atob(e),r=new Uint8Array(t.length),n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r}for(var t,u=(function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var r=new Uint8Array(16);e.exports=function(){return t(r),r}}else{var n=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}}(t={exports:{}},t.exports),t.exports),n=[],o=0;o<256;++o)n[o]=(o+256).toString(16).substr(1);var l=function(e,t){var r=t||0;return[n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]]].join("")};var i=function(e,t,r){var n=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||u)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var i=0;i<16;++i)t[n+i]=o[i];return t||l(o)},c={msRestVersion:"1.11.2",HTTP:"http:",HTTPS:"https:",HTTP_PROXY:"HTTP_PROXY",HTTPS_PROXY:"HTTPS_PROXY",HttpConstants:{HttpVerbs:{PUT:"PUT",GET:"GET",DELETE:"DELETE",POST:"POST",MERGE:"MERGE",HEAD:"HEAD",PATCH:"PATCH"},StatusCodes:{TooManyRequests:429}},HeaderConstants:{AUTHORIZATION:"authorization",AUTHORIZATION_SCHEME:"Bearer",RETRY_AFTER:"Retry-After",USER_AGENT:"User-Agent"}},f="undefined"!=typeof process&&!!process.version&&!!process.versions&&!!process.versions.node;function v(e){var t={};return t.body=e.bodyAsText,t.headers=e.headers,t.status=e.status,t}function g(e){var t=e.clone();return t.headers&&t.headers.remove("authorization"),t}function p(e){return new RegExp("^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$","ig").test(e)}function y(){return i()}function h(t,r){return new Promise(function(e){return setTimeout(function(){return e(r)},t)})}var m=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function b(e){return m.test(e)}function w(e,t,r){return e&&t?e.split(t).join(r||""):e}var E=(R.prototype.validateConstraints=function(e,r,n){function t(e,t){throw new Error('"'+n+'" with value "'+r+'" should satisfy the constraint "'+e+'": '+t+".")}if(e.constraints&&null!=r){var o=e.constraints,i=o.ExclusiveMaximum,a=o.ExclusiveMinimum,s=o.InclusiveMaximum,u=o.InclusiveMinimum,l=o.MaxItems,c=o.MaxLength,f=o.MinItems,p=o.MinLength,h=o.MultipleOf,d=o.Pattern,y=o.UniqueItems;null!=i&&i<=r&&t("ExclusiveMaximum",i),null!=a&&r<=a&&t("ExclusiveMinimum",a),null!=s&&s<r&&t("InclusiveMaximum",s),null!=u&&r<u&&t("InclusiveMinimum",u),null!=l&&r.length>l&&t("MaxItems",l),null!=c&&r.length>c&&t("MaxLength",c),null!=f&&r.length<f&&t("MinItems",f),null!=p&&r.length<p&&t("MinLength",p),null!=h&&r%h!=0&&t("MultipleOf",h),d&&null===r.match(d)&&t("Pattern",d),y&&r.some(function(e,t,r){return r.indexOf(e)!==t})&&t("UniqueItems",y)}},R.prototype.serialize=function(e,t,r){var n={},o=e.type.name;r=r||e.serializedName,null!==o.match(/^Sequence$/gi)&&(n=[]),null!=t||null==e.defaultValue&&!e.isConstant||(t=e.defaultValue);var i=e.required,a=e.nullable;if(i&&a&&void 0===t)throw new Error(r+" cannot be undefined.");if(i&&!a&&null==t)throw new Error(r+" cannot be null or undefined.");if(!i&&!1===a&&null===t)throw new Error(r+" cannot be null.");return null==t?n=t:(this.validateConstraints(e,t,r),null!==o.match(/^any$/gi)?n=t:null!==o.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/gi)?n=function(e,t,r){if(null!=r)if(null!==e.match(/^Number$/gi)){if("number"!=typeof r)throw new Error(t+" with value "+r+" must be of type number.")}else if(null!==e.match(/^String$/gi)){if("string"!=typeof r.valueOf())throw new Error(t+' with value "'+r+'" must be of type string.')}else if(null!==e.match(/^Uuid$/gi)){if("string"!=typeof r.valueOf()||!p(r))throw new Error(t+' with value "'+r+'" must be of type string and a valid uuid.')}else if(null!==e.match(/^Boolean$/gi)){if("boolean"!=typeof r)throw new Error(t+" with value "+r+" must be of type boolean.")}else if(null!==e.match(/^Stream$/gi)){var n=typeof r;if(!("string"==n||"function"==n||r instanceof ArrayBuffer||ArrayBuffer.isView(r)||"function"==typeof Blob&&r instanceof Blob))throw new Error(t+" must be a string, Blob, ArrayBuffer, ArrayBufferView, or a function returning NodeJS.ReadableStream.")}return r}(o,r,t):null!==o.match(/^Enum$/gi)?n=function(e,t,r){if(!t)throw new Error("Please provide a set of allowedValues to validate "+e+" as an Enum Type.");if(t.some(function(e){return"string"==typeof e.valueOf()?e.toLowerCase()===r.toLowerCase():e===r}))return r;throw new Error(r+" is not a valid value for "+e+". The valid values are: "+JSON.stringify(t)+".")}(r,e.type.allowedValues,t):null!==o.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/gi)?n=function(e,t,r){if(null!=t)if(null!==e.match(/^Date$/gi)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(r+" must be an instanceof Date or a string in ISO8601 format.");t=t instanceof Date?t.toISOString().substring(0,10):new Date(t).toISOString().substring(0,10)}else if(null!==e.match(/^DateTime$/gi)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(r+" must be an instanceof Date or a string in ISO8601 format.");t=t instanceof Date?t.toISOString():new Date(t).toISOString()}else if(null!==e.match(/^DateTimeRfc1123$/gi)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(r+" must be an instanceof Date or a string in RFC-1123 format.");t=t instanceof Date?t.toUTCString():new Date(t).toUTCString()}else if(null!==e.match(/^UnixTime$/gi)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(r+" must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.");t=function(e){if(e)return"string"==typeof e.valueOf()&&(e=new Date(e)),Math.floor(e.getTime()/1e3)}(t)}else if(null!==e.match(/^TimeSpan$/gi)){if(!b(t))throw new Error(r+' must be a string in ISO 8601 format. Instead was "'+t+'".');t=t}return t}(o,t,r):null!==o.match(/^ByteArray$/gi)?n=function(e,t){if(null!=t){if(!(t instanceof Uint8Array))throw new Error(e+" must be of type Uint8Array.");t=s(t)}return t}(r,t):null!==o.match(/^Base64Url$/gi)?n=function(e,t){if(null!=t){if(!(t instanceof Uint8Array))throw new Error(e+" must be of type Uint8Array.");t=function(e){if(e){if(e instanceof Uint8Array)return function(e,t){for(var r=e.length;0<=r-1&&e[r-1]===t;)--r;return e.substr(0,r)}(s(e),"=").replace(/\+/g,"-").replace(/\//g,"_");throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.")}}(t)}return t}(r,t):null!==o.match(/^Sequence$/gi)?n=function(e,t,r,n){if(!Array.isArray(r))throw new Error(n+" must be of type Array.");var o=t.type.element;if(!o||"object"!=typeof o)throw new Error('element" metadata for an Array must be defined in the mapper and it must of type "object" in '+n+".");for(var i=[],a=0;a<r.length;a++)i[a]=e.serialize(o,r[a],n);return i}(this,e,t,r):null!==o.match(/^Dictionary$/gi)?n=function(e,t,r,n){if("object"!=typeof r)throw new Error(n+" must be of type object.");var o=t.type.value;if(!o||"object"!=typeof o)throw new Error('"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in '+n+".");for(var i={},a=0,s=Object.keys(r);a<s.length;a++){var u=s[a];i[u]=e.serialize(o,r[u],n+"."+u)}return i}(this,e,t,r):null!==o.match(/^Composite$/gi)&&(n=function(e,t,r,n){var o;if(k(e,t)&&(t=H(e,t,r,"clientName")),null==r)return r;for(var i={},a=U(e,t,n),s=0,u=Object.keys(a);s<u.length;s++){var l=u[s],c=a[l];if(!c.readOnly){var f=void 0,p=i;if(e.isXML)f=c.xmlIsWrapped?c.xmlName:c.xmlElementName||c.xmlName;else{var h=I(c.serializedName);f=h.pop();for(var d=0,y=h;d<y.length;d++){var m=y[d];null==p[m]&&null!=r[l]&&(p[m]={}),p=p[m]}}if(null!=p){var v=""!==c.serializedName?n+"."+c.serializedName:n,g=r[l],b=k(e,t);b&&b.clientName===l&&null==g&&(g=t.serializedName);var w=e.serialize(c,g,v);void 0!==w&&null!=f&&(c.xmlIsAttribute?(p.$=p.$||{},p.$[f]=w):c.xmlIsWrapped?p[f]=((o={})[c.xmlElementName]=w,o):p[f]=w)}}}var E=t.type.additionalProperties;if(E){var R=Object.keys(a),T=function(t){R.every(function(e){return e!==t})&&(i[t]=e.serialize(E,r[t],n+'["'+t+'"]'))};for(var _ in r)T(_)}return i}(this,e,t,r))),n},R.prototype.deserialize=function(e,t,r){if(null==t)return this.isXML&&"Sequence"===e.type.name&&!e.xmlIsWrapped&&(t=[]),t;var n,o,i=e.type.name;return r=r||e.serializedName,null!==i.match(/^Composite$/gi)?n=function(e,t,r,n){k(e,t)&&(t=H(e,t,r,"serializedName"));for(var o=U(e,t,n),i={},a=[],s=0,u=Object.keys(o);s<u.length;s++){var l=u[s],c=o[l],f=I(o[l].serializedName);a.push(f[0]);var p=c.serializedName,h=c.xmlName,d=c.xmlElementName,y=n;""!==p&&void 0!==p&&(y=n+"."+p);var m=c.headerCollectionPrefix;if(m){for(var v={},g=0,b=Object.keys(r);g<b.length;g++){var w=b[g];w.startsWith(m)&&(v[w.substring(m.length)]=e.deserialize(c.type.value,r[w],y)),a.push(w)}i[l]=v}else if(e.isXML)if(c.xmlIsAttribute&&r.$)i[l]=e.deserialize(c,r.$[h],y);else{var E=r[d||h||p];c.xmlIsWrapped&&void 0===(E=(E=r[h])&&E[d])&&(E=[]),i[l]=e.deserialize(c,E,y)}else{for(var R=void 0,T=r,_=0,P=f;_<P.length;_++){var S=P[_];if(!T)break;T=T[S]}R=T;var O=t.type.polymorphicDiscriminator;O&&c.serializedName===O.serializedName&&null==R&&(R=t.serializedName);var x=void 0;Array.isArray(r[l])&&""===o[l].serializedName?(R=r[l],i=e.deserialize(c,R,y)):void 0!==R&&(x=e.deserialize(c,R,y),i[l]=x)}}var N=t.type.additionalProperties;if(N){var A=function(e){for(var t in o)if(I(o[t].serializedName)[0]===e)return!1;return!0};for(var q in r)A(q)&&(i[q]=e.deserialize(N,r[q],n+'["'+q+'"]'))}else if(r)for(var C=0,D=Object.keys(r);C<D.length;C++)l=D[C],void 0!==i[l]||a.includes(l)||["$","_"].includes(l)||(i[l]=r[l]);return i}(this,e,t,r):(this.isXML&&null!=t.$&&null!=t._&&(t=t._),null!==i.match(/^Number$/gi)?(n=parseFloat(t),isNaN(n)&&(n=t)):null!==i.match(/^Boolean$/gi)?n="true"===t||"false"!==t&&t:null!==i.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/gi)?n=t:null!==i.match(/^(Date|DateTime|DateTimeRfc1123)$/gi)?n=new Date(t):null!==i.match(/^UnixTime$/gi)?n=(o=t)?new Date(1e3*o):void 0:null!==i.match(/^ByteArray$/gi)?n=a(t):null!==i.match(/^Base64Url$/gi)?n=function(e){if(e){if(e&&"string"!=typeof e.valueOf())throw new Error("Please provide an input of type string for converting to Uint8Array");return a(e=e.replace(/\-/g,"+").replace(/\_/g,"/"))}}(t):null!==i.match(/^Sequence$/gi)?n=function(e,t,r,n){var o=t.type.element;if(!o||"object"!=typeof o)throw new Error('element" metadata for an Array must be defined in the mapper and it must of type "object" in '+n);if(r){Array.isArray(r)||(r=[r]);for(var i=[],a=0;a<r.length;a++)i[a]=e.deserialize(o,r[a],n+"["+a+"]");return i}return r}(this,e,t,r):null!==i.match(/^Dictionary$/gi)&&(n=function(e,t,r,n){var o=t.type.value;if(!o||"object"!=typeof o)throw new Error('"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in '+n);if(r){for(var i={},a=0,s=Object.keys(r);a<s.length;a++){var u=s[a];i[u]=e.deserialize(o,r[u],n)}return i}return r}(this,e,t,r))),e.isConstant&&(n=e.defaultValue),n},R);function R(e,t){void 0===e&&(e={}),this.modelMappers=e,this.isXML=t}function I(e){var t=[],r="";if(e)for(var n=0,o=e.split(".");n<o.length;n++){var i=o[n];"\\"===i.charAt(i.length-1)?r+=i.substr(0,i.length-1)+".":(r+=i,t.push(r),r="")}return t}function U(e,t,r){var n=t.type.modelProperties;if(!n){var o=t.type.className;if(!o)throw new Error('Class name for model "'+r+'" is not provided in the mapper "'+JSON.stringify(t,void 0,2)+'".');var i=e.modelMappers[o];if(!i)throw new Error('mapper() cannot be null or undefined for model "'+o+'".');if(!(n=i.type.modelProperties))throw new Error('modelProperties cannot be null or undefined in the mapper "'+JSON.stringify(i)+'" of type "'+o+'" for object "'+r+'".')}return n}function H(e,t,r,n){var o=k(e,t);if(o){var i=o[n];if(null!=i){var a=r[i];if(null!=a){var s=t.type.uberParent||t.type.className,u=a===s?a:s+"."+a,l=e.modelMappers.discriminators[u];l&&(t=l)}}}return t}function k(e,t){return t.type.polymorphicDiscriminator||T(e,t.type.uberParent)||T(e,t.type.className)}function T(e,t){return t&&e.modelMappers[t]&&e.modelMappers[t].type.polymorphicDiscriminator}var A=function(e){for(var t={},r=0,n=e;r<n.length;r++){var o=n[r];t[o]=o}return t}(["Base64Url","Boolean","ByteArray","Composite","Date","DateTime","DateTimeRfc1123","Dictionary","Enum","Number","Object","Sequence","String","Stream","TimeSpan","UnixTime"]),q=(_.prototype.validateRequestProperties=function(){if(!this.method)throw new Error("WebResource.method is required.");if(!this.url)throw new Error("WebResource.url is required.")},_.prototype.prepare=function(e){if(!e)throw new Error("options object is required");if(null==e.method||"string"!=typeof e.method.valueOf())throw new Error("options.method must be a string.");if(e.url&&e.pathTemplate)throw new Error("options.url and options.pathTemplate are mutually exclusive. Please provide exactly one of them.");if(!(null!=e.pathTemplate&&"string"==typeof e.pathTemplate.valueOf()||null!=e.url&&"string"==typeof e.url.valueOf()))throw new Error("Please provide exactly one of options.pathTemplate or options.url.");if(e.url){if("string"!=typeof e.url)throw new Error('options.url must be of type "string".');this.url=e.url}if(e.method){var t=["GET","PUT","HEAD","DELETE","OPTIONS","POST","PATCH","TRACE"];if(-1===t.indexOf(e.method.toUpperCase()))throw new Error('The provided method "'+e.method+'" is invalid. Supported HTTP methods are: '+JSON.stringify(t))}if(this.method=e.method.toUpperCase(),e.pathTemplate){var n=e.pathTemplate,o=e.pathParameters;if("string"!=typeof n)throw new Error('options.pathTemplate must be of type "string".');e.baseUrl||(e.baseUrl="https://management.azure.com");var r=e.baseUrl,i=r+(r.endsWith("/")?"":"/")+(n.startsWith("/")?n.slice(1):n),a=i.match(/({\w*\s*\w*})/gi);if(a&&a.length){if(!o)throw new Error("pathTemplate: "+n+" has been provided. Hence, options.pathParameters must also be provided.");a.forEach(function(e){var t=e.slice(1,-1),r=o[t];if(null==r||"string"!=typeof r&&"object"!=typeof r)throw new Error("pathTemplate: "+n+" contains the path parameter "+t+" however, it is not present in "+o+" - "+JSON.stringify(o,void 0,2)+'.The value of the path parameter can either be a "string" of the form { '+t+': "some sample value" } or it can be an "object" of the form { "'+t+'": { value: "some sample value", skipUrlEncoding: true } }.');if("string"==typeof r.valueOf()&&(i=i.replace(e,encodeURIComponent(r))),"object"==typeof r.valueOf()){if(!r.value)throw new Error("options.pathParameters["+t+'] is of type "object" but it does not contain a "value" property.');i=r.skipUrlEncoding?i.replace(e,r.value):i.replace(e,encodeURIComponent(r.value))}})}this.url=i}if(e.queryParameters){var s=e.queryParameters;if("object"!=typeof s)throw new Error('options.queryParameters must be of type object. It should be a JSON object of "query-parameter-name" as the key and the "query-parameter-value" as the value. The "query-parameter-value" may be fo type "string" or an "object" of the form { value: "query-parameter-value", skipUrlEncoding: true }.');this.url&&-1===this.url.indexOf("?")&&(this.url+="?");var u=[];for(var l in this.query={},s){var c=s[l];if(c)if("string"==typeof c)u.push(l+"="+encodeURIComponent(c)),this.query[l]=encodeURIComponent(c);else if("object"==typeof c){if(!c.value)throw new Error("options.queryParameters["+l+'] is of type "object" but it does not contain a "value" property.');c.skipUrlEncoding?(u.push(l+"="+c.value),this.query[l]=c.value):(u.push(l+"="+encodeURIComponent(c.value)),this.query[l]=encodeURIComponent(c.value))}}this.url+=u.join("&")}if(e.headers)for(var f=e.headers,p=0,h=Object.keys(e.headers);p<h.length;p++){var d=h[p];this.headers.set(d,f[d])}return this.headers.get("accept-language")||this.headers.set("accept-language","en-US"),this.headers.get("x-ms-client-request-id")||e.disableClientRequestId||this.headers.set("x-ms-client-request-id",y()),this.headers.get("Content-Type")||this.headers.set("Content-Type","application/json; charset=utf-8"),this.body=e.body,null!=e.body&&(e.bodyIsStream?(this.headers.get("Transfer-Encoding")||this.headers.set("Transfer-Encoding","chunked"),"application/octet-stream"!==this.headers.get("Content-Type")&&this.headers.set("Content-Type","application/octet-stream")):(e.serializationMapper&&(this.body=new E(e.mappers).serialize(e.serializationMapper,e.body,"requestBody")),e.disableJsonStringifyOnBody||(this.body=JSON.stringify(e.body)))),this.abortSignal=e.abortSignal,this.onDownloadProgress=e.onDownloadProgress,this.onUploadProgress=e.onUploadProgress,this},_.prototype.clone=function(){var e=new _(this.url,this.method,this.body,this.query,this.headers&&this.headers.clone(),this.streamResponseBody,this.withCredentials,this.abortSignal,this.timeout,this.onUploadProgress,this.onDownloadProgress,this.proxySettings,this.keepAlive,this.agentSettings);return this.formData&&(e.formData=this.formData),this.operationSpec&&(e.operationSpec=this.operationSpec),this.shouldDeserialize&&(e.shouldDeserialize=this.shouldDeserialize),this.operationResponseGetter&&(e.operationResponseGetter=this.operationResponseGetter),e},_);function _(e,t,r,n,o,i,a,s,u,l,c,f,p,h){this.streamResponseBody=i,this.url=e||"",this.method=t||"GET",this.headers=o instanceof d?o:new d(o),this.body=r,this.query=n,this.formData=void 0,this.withCredentials=a||!1,this.abortSignal=s,this.timeout=u||0,this.onUploadProgress=l,this.onDownloadProgress=c,this.proxySettings=f,this.keepAlive=p,this.agentSettings=h}var P=function(e,t){return(P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function S(e,t){function r(){this.constructor=e}P(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var O=function(){return(O=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function x(i,a,s,u){return new(s=s||Promise)(function(e,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function n(e){try{o(u.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(r,n)}o((u=u.apply(i,a||[])).next())})}function C(r,n){var o,i,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=n.call(r,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var D,M=(S(z,D=Error),z.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR",z.REQUEST_ABORTED_ERROR="REQUEST_ABORTED_ERROR",z.PARSE_ERROR="PARSE_ERROR",z);function z(e,t,r,n,o,i){var a=D.call(this,e)||this;return a.code=t,a.statusCode=r,a.request=n,a.response=o,a.body=i,Object.setPrototypeOf(a,z.prototype),a}var j,L=(B.prototype.sendRequest=function(r){var n=new XMLHttpRequest;if(r.agentSettings)throw new Error("HTTP agent settings not supported in browser environment");if(r.proxySettings)throw new Error("HTTP proxy is not supported in browser environment");var e=r.abortSignal;if(e){var t=function(){n.abort()};e.addEventListener("abort",t),n.addEventListener("readystatechange",function(){n.readyState===XMLHttpRequest.DONE&&e.removeEventListener("abort",t)})}if(F(n.upload,r.onUploadProgress),F(n,r.onDownloadProgress),r.formData){for(var o=r.formData,i=new FormData,a=function(e,t){t&&t.hasOwnProperty("value")&&t.hasOwnProperty("options")?i.append(e,t.value,t.options):i.append(e,t)},s=0,u=Object.keys(o);s<u.length;s++){var l=u[s],c=o[l];if(Array.isArray(c))for(var f=0;f<c.length;f++)a(l,c[f]);else a(l,c)}r.body=i,r.formData=void 0;var p=r.headers.get("Content-Type");p&&-1!==p.indexOf("multipart/form-data")&&r.headers.remove("Content-Type")}n.open(r.method,r.url),n.timeout=r.timeout,n.withCredentials=r.withCredentials;for(var h=0,d=r.headers.headersArray();h<d.length;h++){var y=d[h];n.setRequestHeader(y.name,y.value)}return n.responseType=r.streamResponseBody?"blob":"text",n.send(void 0===r.body?null:r.body),r.streamResponseBody?new Promise(function(t,e){n.addEventListener("readystatechange",function(){if(n.readyState===XMLHttpRequest.HEADERS_RECEIVED){var e=new Promise(function(e,t){n.addEventListener("load",function(){e(n.response)}),Q(r,n,t)});t({request:r,status:n.status,headers:$(n),blobBody:e})}}),Q(r,n,e)}):new Promise(function(e,t){n.addEventListener("load",function(){return e({request:r,status:n.status,headers:$(n),bodyAsText:n.responseText})}),Q(r,n,t)})},B);function B(){}function F(e,t){t&&e.addEventListener("progress",function(e){return t({loadedBytes:e.loaded})})}function $(e){for(var t=new d,r=0,n=e.getAllResponseHeaders().trim().split(/[\r\n]+/);r<n.length;r++){var o=n[r],i=o.indexOf(":"),a=o.slice(0,i),s=o.slice(i+2);t.set(a,s)}return t}function Q(e,t,r){t.addEventListener("error",function(){return r(new M("Failed to send request to "+e.url,M.REQUEST_SEND_ERROR,void 0,e))}),t.addEventListener("abort",function(){return r(new M("The request was aborted",M.REQUEST_ABORTED_ERROR,void 0,e))}),t.addEventListener("timeout",function(){return r(new M("timeout of "+t.timeout+"ms exceeded",M.REQUEST_SEND_ERROR,void 0,e))})}(j=N.HttpPipelineLogLevel||(N.HttpPipelineLogLevel={}))[j.OFF=0]="OFF",j[j.ERROR=1]="ERROR",j[j.WARNING=2]="WARNING",j[j.INFO=3]="INFO";Object.defineProperty(V.prototype,"key",{get:function(){return this._key},enumerable:!1,configurable:!0}),V.prototype.update=function(e){this._key=e};function V(e){if(!e)throw new Error("key must be a non-empty string");this._key=e}function Y(e){return X(e.parameterPath,e.mapper)}function X(e,t){return"string"==typeof e?e:Array.isArray(e)?e.join("."):t.serializedName}function W(e){var t=!1;for(var r in e.responses){var n=e.responses[r];if(n.bodyMapper&&n.bodyMapper.type.name===A.Stream){t=!0;break}}return t}var J=new DOMParser;function G(e){try{var t=J.parseFromString(e,"application/xml");!function(e){if(K){var t=e.getElementsByTagNameNS(K,"parsererror");if(t.length)throw new Error(t.item(0).innerHTML)}}(t);var r=function e(t){var r={};var n=t.childNodes.length;var o=t.childNodes[0];var i=o&&1===n&&o.nodeType===Node.TEXT_NODE&&o.nodeValue||void 0;var a=(s=t,function(e){return!!e.attributes}(s)&&s.hasAttributes()?s:void 0);var s;if(a){r.$={};for(var u=0;u<a.attributes.length;u++){var l=a.attributes[u];r.$[l.nodeName]=l.nodeValue}i&&(r._=i)}else 0===n?r="":i&&(r=i);if(!i)for(var u=0;u<n;u++){var c=t.childNodes[u];if(c.nodeType!==Node.TEXT_NODE){var f=e(c);r[c.nodeName]?Array.isArray(r[c.nodeName])?r[c.nodeName].push(f):r[c.nodeName]=[r[c.nodeName],f]:r[c.nodeName]=f}}return r}(t.childNodes[0]);return Promise.resolve(r)}catch(e){return Promise.reject(e)}}var K="";try{K=J.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch(e){}var Z=document.implementation.createDocument(null,null,null),ee=new XMLSerializer;function te(e,t){var r=function e(t,r){{if("string"==typeof t||"number"==typeof t||"boolean"==typeof t){var n=Z.createElement(r);return n.textContent=t.toString(),[n]}if(Array.isArray(t)){for(var o=[],i=0,a=t;i<a.length;i++)for(var s=a[i],u=0,l=e(s,r);u<l.length;u++){var c=l[u];o.push(c)}return o}if("object"!=typeof t)throw new Error("Illegal value passed to buildObject: "+t);for(var n=Z.createElement(r),f=0,p=Object.keys(t);f<p.length;f++){var h=p[f];if("$"===h)for(var d=0,y=re(t[h]);d<y.length;d++){var m=y[d];n.attributes.setNamedItem(m)}else for(var v=0,g=e(t[h],h);v<g.length;v++){var c=g[v];n.appendChild(c)}}return[n]}}(e,t&&t.rootName||"root")[0];return'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+ee.serializeToString(r)}function re(e){for(var t=[],r=0,n=Object.keys(e);r<n.length;r++){var o=n[r],i=Z.createAttribute(o);i.value=e[o].toString(),t.push(i)}return t}var ne=(oe.prototype.shouldLog=function(e){return this._options.shouldLog(e)},oe.prototype.log=function(e,t){this._options.log(e,t)},oe);function oe(e,t){this._nextPolicy=e,this._options=t}var ie=(ae.prototype.shouldLog=function(e){return!!this._logger&&e!==N.HttpPipelineLogLevel.OFF&&e<=this._logger.minimumLogLevel},ae.prototype.log=function(e,t){this._logger&&this.shouldLog(e)&&this._logger.log(e,t)},ae);function ae(e){this._logger=e}function se(r){return{create:function(e,t){return new fe(e,r,t)}}}var ue,le=["application/json","text/json"],ce=["application/xml","application/atom+xml"],fe=(S(pe,ue=ne),pe.prototype.sendRequest=function(r){return x(this,void 0,void 0,function(){var t=this;return C(this,function(e){return[2,this._nextPolicy.sendRequest(r).then(function(e){return he(t.jsonContentTypes,t.xmlContentTypes,e)})]})})},pe);function pe(e,t,r){var n=ue.call(this,e,r)||this;return n.jsonContentTypes=t&&t.json||le,n.xmlContentTypes=t&&t.xml||ce,n}function he(e,t,m){return function(t,r,o){function e(e){var t='Error "'+e+'" occurred while parsing the response body - '+o.bodyAsText+".",r=e.code||M.PARSE_ERROR,n=new M(t,r,o.status,o.request,o,o.bodyAsText);return Promise.reject(n)}if(!o.request.streamResponseBody&&o.bodyAsText){var n=o.bodyAsText,i=o.headers.get("Content-Type")||"",a=i?i.split(";").map(function(e){return e.toLowerCase()}):[];if(0===a.length||a.some(function(e){return-1!==t.indexOf(e)}))return new Promise(function(e){o.parsedBody=JSON.parse(n),e(o)}).catch(e);if(a.some(function(e){return-1!==r.indexOf(e)}))return G(n).then(function(e){return o.parsedBody=e,o}).catch(e)}return Promise.resolve(o)}(e,t,m).then(function(t){var e,r;if(void 0===(r=(e=t).request.shouldDeserialize)||("boolean"==typeof r?r:r(e))){var n=t.request.operationSpec;if(n&&n.responses){var o=t.status,i=Object.keys(n.responses),a=0===i.length||1===i.length&&"default"===i[0],s=function(e){var t,r=e.request,n=r.operationSpec;if(n){var o=r.operationResponseGetter;t=o?o(n,e):n.responses[e.status]}return t}(t);if(a?200<=o&&o<300:!!s){if(s){if(s.bodyMapper){y=t.parsedBody;n.isXML&&s.bodyMapper.type.name===A.Sequence&&(y="object"==typeof y?y[s.bodyMapper.xmlElementName]:[]);try{t.parsedBody=n.serializer.deserialize(s.bodyMapper,y,"operationRes.parsedBody")}catch(f){var u=new M("Error "+f+" occurred in deserializing the responseBody - "+t.bodyAsText);return u.request=g(t.request),u.response=v(t),Promise.reject(u)}}else"HEAD"===n.httpMethod&&(t.parsedBody=200<=m.status&&m.status<300);s.headersMapper&&(t.parsedHeaders=n.serializer.deserialize(s.headersMapper,t.headers.rawHeaders(),"operationRes.parsedHeaders"))}}else{var l=n.responses.default;if(l){var c=W(n)?"Unexpected status code: "+o:t.bodyAsText,f=new M(c);f.statusCode=o,f.request=g(t.request),f.response=v(t);var p=t.parsedBody;try{if(p){var h=l.bodyMapper;if(h&&"CloudError"===h.serializedName)p.error&&(p=p.error),p.code&&(f.code=p.code),p.message&&(f.message=p.message);else{var d=p;p.error&&(d=p.error),f.code=d.code,d.message&&(f.message=d.message)}if(h){var y=p;n.isXML&&h.type.name===A.Sequence&&(y="object"==typeof p?p[h.xmlElementName]:[]),f.body=n.serializer.deserialize(h,y,"error.body")}}}catch(e){f.message='Error "'+e.message+'" occurred in deserializing the responseBody - "'+t.bodyAsText+'" for the default response.'}return Promise.reject(f)}}}}return Promise.resolve(t)})}function de(r,n,o,i){return{create:function(e,t){return new me(e,t,r,n,o,i)}}}var ye,me=(S(ve,ye=ne),ve.prototype.sendRequest=function(t){var r=this;return this._nextPolicy.sendRequest(t.clone()).then(function(e){return ge(r,t,e)}).catch(function(e){return ge(r,t,e.response,void 0,e)})},ve);function ve(e,t,r,n,o,i){var a=ye.call(this,e,t)||this;function s(e){return"number"==typeof e}return a.retryCount=s(r)?r:3,a.retryInterval=s(n)?n:3e4,a.minRetryInterval=s(o)?o:3e3,a.maxRetryInterval=s(i)?i:9e4,a}function ge(t,r,n,o,e){o=function(e,t,r){t=t||{retryCount:0,retryInterval:0},r&&(t.error&&(r.innerError=t.error),t.error=r),t.retryCount++;var n=Math.pow(2,t.retryCount)-1;return n*=.8*e.retryInterval+Math.floor(Math.random()*(1.2*e.retryInterval-.8*e.retryInterval)),t.retryInterval=Math.min(e.minRetryInterval+n,e.maxRetryInterval),t}(t,o,e);var i=r.abortSignal&&r.abortSignal.aborted;if(!i&&function(e,t,r){if(null==t||t<500&&408!==t||501===t||505===t)return!1;if(!r)throw new Error("retryData for the ExponentialRetryPolicyFilter cannot be null.");return(r&&r.retryCount)<e.retryCount}(t,n&&n.status,o))return h(o.retryInterval).then(function(){return t._nextPolicy.sendRequest(r.clone())}).then(function(e){return ge(t,r,e,o,void 0)}).catch(function(e){return ge(t,r,n,o,e)});if(i||e||!n){var a=o.error||new M("Failed to send the request.",M.REQUEST_SEND_ERROR,n&&n.status,n&&n.request,n);return Promise.reject(a)}return Promise.resolve(n)}function be(r){return void 0===r&&(r="x-ms-client-request-id"),{create:function(e,t){return new Ee(e,t,r)}}}var we,Ee=(S(Re,we=ne),Re.prototype.sendRequest=function(e){return e.headers.contains(this._requestIdHeaderName)||e.headers.set(this._requestIdHeaderName,y()),this._nextPolicy.sendRequest(e)},Re);function Re(e,t,r){var n=we.call(this,e,t)||this;return n._requestIdHeaderName=r,n}function Te(){return"x-ms-command-name"}var _e=Te;function Pe(){var e,t,r,n,o=[{key:"ms-rest-js",value:c.msRestVersion}],i=[{key:"OS",value:((e=window.navigator).oscpu||e.platform).replace(" ","")}];return t=o.concat(i),void 0===r&&(r=" "),void 0===n&&(n="/"),t.map(function(e){var t=e.value?""+n+e.value:"";return e.key+t}).join(r)}function Se(e){var r=e&&null!=e.key?e.key:Te(),n=e&&null!=e.value?e.value:Pe();return{create:function(e,t){return new xe(e,t,r,n)}}}var Oe,xe=(S(Ne,Oe=ne),Ne.prototype.sendRequest=function(e){return this.addUserAgentHeader(e),this._nextPolicy.sendRequest(e)},Ne.prototype.addUserAgentHeader=function(e){e.headers||(e.headers=new d),!e.headers.get(this.headerKey)&&this.headerValue&&e.headers.set(this.headerKey,this.headerValue)},Ne);function Ne(e,t,r,n){var o=Oe.call(this,e,t)||this;return o._nextPolicy=e,o._options=t,o.headerKey=r,o.headerValue=n,o}var Ae=(qe.prototype.any=function(){return 0<Object.keys(this._rawQuery).length},qe.prototype.set=function(e,t){if(e)if(null!=t){var r=Array.isArray(t)?t:t.toString();this._rawQuery[e]=r}else delete this._rawQuery[e]},qe.prototype.get=function(e){return e?this._rawQuery[e]:void 0},qe.prototype.toString=function(){var e="";for(var t in this._rawQuery){e&&(e+="&");var r=this._rawQuery[t];if(Array.isArray(r)){for(var n=[],o=0,i=r;o<i.length;o++){var a=i[o];n.push(t+"="+a)}e+=n.join("&")}else e+=t+"="+r}return e},qe.parse=function(e){var t=new qe;if(e){e.startsWith("?")&&(e=e.substring(1));for(var r="ParameterName",n="",o="",i=0;i<e.length;++i){var a=e[i];switch(r){case"ParameterName":switch(a){case"=":r="ParameterValue";break;case"&":o=n="";break;default:n+=a}break;case"ParameterValue":switch(a){case"=":o=n="",r="Invalid";break;case"&":t.set(n,o),o=n="",r="ParameterName";break;default:o+=a}break;case"Invalid":"&"===a&&(r="ParameterName");break;default:throw new Error("Unrecognized URLQuery parse state: "+r)}}"ParameterValue"===r&&t.set(n,o)}return t},qe);function qe(){this._rawQuery={}}var Ce=(De.prototype.setScheme=function(e){e?this.set(e,"SCHEME"):this._scheme=void 0},De.prototype.getScheme=function(){return this._scheme},De.prototype.setHost=function(e){e?this.set(e,"SCHEME_OR_HOST"):this._host=void 0},De.prototype.getHost=function(){return this._host},De.prototype.setPort=function(e){null==e||""===e?this._port=void 0:this.set(e.toString(),"PORT")},De.prototype.getPort=function(){return this._port},De.prototype.setPath=function(e){e?-1!==e.indexOf("://")?this.set(e,"SCHEME"):this.set(e,"PATH"):this._path=void 0},De.prototype.appendPath=function(e){if(e){var t=this.getPath();t&&(t.endsWith("/")||(t+="/"),e.startsWith("/")&&(e=e.substring(1)),e=t+e),this.set(e,"PATH")}},De.prototype.getPath=function(){return this._path},De.prototype.setQuery=function(e){this._query=e?Ae.parse(e):void 0},De.prototype.setQueryParameter=function(e,t){e&&(this._query||(this._query=new Ae),this._query.set(e,t))},De.prototype.getQueryParameterValue=function(e){return this._query?this._query.get(e):void 0},De.prototype.getQuery=function(){return this._query?this._query.toString():void 0},De.prototype.set=function(e,t){for(var r=new He(e,t);r.next();){var n=r.current();if(n)switch(n.type){case"SCHEME":this._scheme=n.text||void 0;break;case"HOST":this._host=n.text||void 0;break;case"PORT":this._port=n.text||void 0;break;case"PATH":var o=n.text||void 0;this._path&&"/"!==this._path&&"/"===o||(this._path=o);break;case"QUERY":this._query=Ae.parse(n.text);break;default:throw new Error("Unrecognized URLTokenType: "+n.type)}}},De.prototype.toString=function(){var e="";return this._scheme&&(e+=this._scheme+"://"),this._host&&(e+=this._host),this._port&&(e+=":"+this._port),this._path&&(this._path.startsWith("/")||(e+="/"),e+=this._path),this._query&&this._query.any()&&(e+="?"+this._query.toString()),e},De.prototype.replaceAll=function(e,t){e&&(this.setScheme(w(this.getScheme(),e,t)),this.setHost(w(this.getHost(),e,t)),this.setPort(w(this.getPort(),e,t)),this.setPath(w(this.getPath(),e,t)),this.setQuery(w(this.getQuery(),e,t)))},De.parse=function(e){var t=new De;return t.set(e,"SCHEME_OR_HOST"),t},De);function De(){}var Ie=(Ue.scheme=function(e){return new Ue(e,"SCHEME")},Ue.host=function(e){return new Ue(e,"HOST")},Ue.port=function(e){return new Ue(e,"PORT")},Ue.path=function(e){return new Ue(e,"PATH")},Ue.query=function(e){return new Ue(e,"QUERY")},Ue);function Ue(e,t){this.text=e,this.type=t}var He=(ke.prototype.current=function(){return this._currentToken},ke.prototype.next=function(){if(Me(this))switch(this._currentState){case"SCHEME":i=function(e){return Be(e,function(e){return 48<=(t=e.charCodeAt(0))&&t<=57||65<=t&&t<=90||97<=t&&t<=122;var t})}(o=this),o._currentToken=Ie.scheme(i),Me(o)?o._currentState="HOST":o._currentState="DONE";break;case"SCHEME_OR_HOST":n=Fe(r=this,":","/","?"),Me(r)?":"===ze(r)?"://"===Le(r,3)?(r._currentToken=Ie.scheme(n),r._currentState="HOST"):(r._currentToken=Ie.host(n),r._currentState="PORT"):(r._currentToken=Ie.host(n),"/"===ze(r)?r._currentState="PATH":r._currentState="QUERY"):(r._currentToken=Ie.host(n),r._currentState="DONE");break;case"HOST":!function(e){"://"===Le(e,3)&&je(e,3);var t=Fe(e,":","/","?");e._currentToken=Ie.host(t),Me(e)?":"===ze(e)?e._currentState="PORT":"/"===ze(e)?e._currentState="PATH":e._currentState="QUERY":e._currentState="DONE"}(this);break;case"PORT":!function(e){":"===ze(e)&&je(e);var t=Fe(e,"/","?");e._currentToken=Ie.port(t),Me(e)?"/"===ze(e)?e._currentState="PATH":e._currentState="QUERY":e._currentState="DONE"}(this);break;case"PATH":t=Fe(e=this,"?"),e._currentToken=Ie.path(t),Me(e)?e._currentState="QUERY":e._currentState="DONE";break;case"QUERY":!function(e){"?"===ze(e)&&je(e);var t=function(e){var t="";return e._currentIndex<e._textLength&&(t=e._text.substring(e._currentIndex),e._currentIndex=e._textLength),t}(e);e._currentToken=Ie.query(t),e._currentState="DONE"}(this);break;default:throw new Error("Unrecognized URLTokenizerState: "+this._currentState)}else this._currentToken=void 0;var e,t,r,n,o,i;return!!this._currentToken},ke);function ke(e,t){this._text=e,this._textLength=e?e.length:0,this._currentState=null!=t?t:"SCHEME_OR_HOST",this._currentIndex=0}function Me(e){return e._currentIndex<e._textLength}function ze(e){return e._text[e._currentIndex]}function je(e,t){Me(e)&&(t=t||1,e._currentIndex+=t)}function Le(e,t){var r=e._currentIndex+t;return e._textLength<r&&(r=e._textLength),e._text.substring(e._currentIndex,r)}function Be(e,t){for(var r="";Me(e);){var n=ze(e);if(!t(n))break;r+=n,je(e)}return r}function Fe(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return Be(e,function(e){return-1===t.indexOf(e)})}function $e(r){return void 0===r&&(r=20),{create:function(e,t){return new Ve(e,t,r)}}}var Qe,Ve=(S(Ye,Qe=ne),Ye.prototype.sendRequest=function(e){var t=this;return this._nextPolicy.sendRequest(e).then(function(e){return function t(r,e,n){var o=e.request,i=e.status,a=e.headers.get("location");if(a&&(300===i||307===i||303===i&&"POST"===o.method)&&(!r.maxRetries||n<r.maxRetries)){var s=Ce.parse(o.url);return s.setPath(a),o.url=s.toString(),303===i&&(o.method="GET"),r._nextPolicy.sendRequest(o).then(function(e){return t(r,e,n+1)})}return Promise.resolve(e)}(t,e,0)})},Ye);function Ye(e,t,r){void 0===r&&(r=20);var n=Qe.call(this,e,t)||this;return n.maxRetries=r,n}var Xe,We=(S(Je,Xe=ne),Je.prototype.sendRequest=function(t){var r=this;return this._nextPolicy.sendRequest(t.clone()).then(function(e){return function(t,r,n){if(409===n.status){var e=function(e){var t,r;if(e){try{r=JSON.parse(e)}catch(e){}if(r&&r.error&&r.error.message&&r.error.code&&"MissingSubscriptionRegistration"===r.error.code){var n=r.error.message.match(/.*'(.*)'/i);n&&(t=n.pop())}}return t}(n.bodyAsText);if(e){var o=function(e){var t=e.match(/.*\/subscriptions\/[a-f0-9-]+\//gi);if(!t||!t[0])throw new Error("Unable to extract subscriptionId from the given url - "+e+".");return t[0]}(r.url);return function(t,e,r,n){var o=e+"providers/"+r+"/register?api-version=2016-02-01",i=e+"providers/"+r+"?api-version=2016-02-01",a=Ge(n);return a.method="POST",a.url=o,t._nextPolicy.sendRequest(a).then(function(e){if(200!==e.status)throw new Error("Autoregistration of "+r+" failed. Please try registering manually.");return function r(n,o,i){var e=Ge(i);return e.url=o,e.method="GET",n._nextPolicy.sendRequest(e).then(function(e){var t=e.parsedBody;return!(!e.parsedBody||!t.registrationState||"Registered"!==t.registrationState)||h(1e3*n._retryTimeout).then(function(){return r(n,o,i)})})}(t,i,n)})}(t,o,e,r).catch(function(){return!1}).then(function(e){return e?(r.headers.set("x-ms-client-request-id",y()),t._nextPolicy.sendRequest(r.clone())):n})}}return Promise.resolve(n)}(r,t,e)})},Je);function Je(e,t,r){void 0===r&&(r=30);var n=Xe.call(this,e,t)||this;return n._retryTimeout=r,n}function Ge(e,t){void 0===t&&(t=!1);var r=e.clone();return t&&(r.url=e.url),r.headers.set("x-ms-client-request-id",y()),r.headers.set("Content-Type","application/json; charset=utf-8"),r}function Ke(r){return{create:function(e,t){return new et(e,t,r)}}}var Ze,et=(S(tt,Ze=ne),tt.prototype.signRequest=function(e){return this.authenticationProvider.signRequest(e)},tt.prototype.sendRequest=function(e){var t=this;return this.signRequest(e).then(function(e){return t._nextPolicy.sendRequest(e)})},tt);function tt(e,t,r){var n=Ze.call(this,e,t)||this;return n.authenticationProvider=r,n}function rt(r,n,o,i){return{create:function(e,t){return new it(e,t,r,n,o,i)}}}var nt,ot,it=(S(at,nt=ne),at.prototype.sendRequest=function(t){var r=this;return this._nextPolicy.sendRequest(t.clone()).then(function(e){return function t(r,n,o,i,a){return i=ut(r,i,a),a&&a.code&&st(r,i)&&("ETIMEDOUT"===a.code||"ESOCKETTIMEDOUT"===a.code||"ECONNREFUSED"===a.code||"ECONNRESET"===a.code||"ENOENT"===a.code)?h(i.retryInterval).then(function(){return r._nextPolicy.sendRequest(n.clone())}).then(function(e){return t(r,n,e,i,a)}).catch(function(e){return t(r,n,o,i,e)}):null!=a?(a=i.error,Promise.reject(a)):Promise.resolve(o)}(r,t,e)})},at);function at(e,t,r,n,o,i){var a=nt.call(this,e,t)||this;return a.DEFAULT_CLIENT_RETRY_INTERVAL=3e4,a.DEFAULT_CLIENT_RETRY_COUNT=3,a.DEFAULT_CLIENT_MAX_RETRY_INTERVAL=9e4,a.DEFAULT_CLIENT_MIN_RETRY_INTERVAL=3e3,a.retryCount="number"==typeof r?r:a.DEFAULT_CLIENT_RETRY_COUNT,a.retryInterval="number"==typeof n?n:a.DEFAULT_CLIENT_RETRY_INTERVAL,a.minRetryInterval="number"==typeof o?o:a.DEFAULT_CLIENT_MIN_RETRY_INTERVAL,a.maxRetryInterval="number"==typeof i?i:a.DEFAULT_CLIENT_MAX_RETRY_INTERVAL,a}function st(e,t){if(!t)throw new Error("retryData for the SystemErrorRetryPolicyFilter cannot be null.");return(t&&t.retryCount)<e.retryCount}function ut(e,t,r){t=t||{retryCount:0,retryInterval:0},r&&(t.error&&(r.innerError=t.error),t.error=r),t.retryCount++;var n=Math.pow(2,t.retryCount)-1;return n*=.8*e.retryInterval+Math.floor(Math.random()*(1.2*e.retryInterval-.8*e.retryInterval)),t.retryInterval=Math.min(e.minRetryInterval+n,e.maxRetryInterval),t}(ot=N.QueryCollectionFormat||(N.QueryCollectionFormat={})).Csv=",",ot.Ssv=" ",ot.Tsv="\t",ot.Pipes="|",ot.Multi="Multi";var lt=new Error("AgentPolicy is not supported in browser environment");var ct;S(ft,ct=ne),ft.prototype.sendRequest=function(e){throw lt};function ft(e,t){ct.call(this,e,t);throw lt}var pt=new Error("ProxyPolicy is not supported in browser environment");function ht(e){}function dt(e){return{create:function(e,t){throw pt}}}var yt;S(mt,yt=ne),mt.prototype.sendRequest=function(e){throw pt};function mt(e,t){yt.call(this,e,t);throw pt}var vt=c.HttpConstants.StatusCodes;function gt(){return{create:function(e,t){return new wt(e,t)}}}var bt,wt=(S(Et,bt=ne),Et.prototype.sendRequest=function(r){return x(this,void 0,void 0,function(){var t=this;return C(this,function(e){return[2,this._nextPolicy.sendRequest(r.clone()).then(function(e){return e.status!==vt.TooManyRequests?e:t._handleResponse(r,e)})]})})},Et.prototype._defaultResponseHandler=function(o,i){return x(this,void 0,void 0,function(){var t,r,n=this;return C(this,function(e){return(t=i.headers.get(c.HeaderConstants.RETRY_AFTER))&&(r=Et.parseRetryAfterHeader(t))?[2,h(r).then(function(e){return n._nextPolicy.sendRequest(o)})]:[2,i]})})},Et.parseRetryAfterHeader=function(e){var t=Number(e);return Number.isNaN(t)?Et.parseDateRetryAfterHeader(e):1e3*t},Et.parseDateRetryAfterHeader=function(e){try{var t=Date.now(),r=Date.parse(e)-t;return Number.isNaN(r)?void 0:r}catch(e){return}},Et);function Et(e,t,r){var n=bt.call(this,e,t)||this;return n._handleResponse=r||n._defaultResponseHandler,n}var Rt=(Tt.prototype.getToken=function(){return x(this,void 0,void 0,function(){var t;return C(this,function(e){switch(e.label){case 0:return[4,this.azureTokenCredential.getToken(this.scopes)];case 1:if(null!==(t=e.sent()))return[2,{accessToken:t.token,tokenType:"Bearer",expiresOn:t.expiresOnTimestamp}];throw new Error("Could find token for scope")}})})},Tt.prototype.signRequest=function(r){return x(this,void 0,void 0,function(){var t;return C(this,function(e){switch(e.label){case 0:return[4,this.getToken()];case 1:return t=e.sent(),r.headers.set(c.HeaderConstants.AUTHORIZATION,t.tokenType+" "+t.accessToken),[2,Promise.resolve(r)]}})})},Tt);function Tt(e,t){void 0===t&&(t="https://management.azure.com/.default"),this.azureTokenCredential=e,this.scopes=t}var _t=(Pt.prototype.sendRequest=function(e){if(null==e||"object"!=typeof e)throw new Error("options cannot be null or undefined and it must be of type object.");var t;try{t=e instanceof q?(e.validateRequestProperties(),e):(t=new q).prepare(e)}catch(e){return Promise.reject(e)}var r=this._httpClient;if(this._requestPolicyFactories&&0<this._requestPolicyFactories.length)for(var n=this._requestPolicyFactories.length-1;0<=n;--n)r=this._requestPolicyFactories[n].create(r,this._requestPolicyOptions);return r.sendRequest(t)},Pt.prototype.sendOperationRequest=function(e,t,r){"function"==typeof e.options&&(r=e.options,e.options=void 0);var n,o=new q;try{var i=t.baseUrl||this.baseUri;if(!i)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a baseUri string property that contains the base URL to use.");o.method=t.httpMethod,o.operationSpec=t;var a=Ce.parse(i);if(t.path&&a.appendPath(t.path),t.urlParameters&&0<t.urlParameters.length)for(var s=0,u=t.urlParameters;s<u.length;s++){var l=u[s],c=Ot(this,e,l,t.serializer);c=t.serializer.serialize(l.mapper,c,Y(l)),l.skipEncoding||(c=encodeURIComponent(c)),a.replaceAll("{"+(l.mapper.serializedName||Y(l))+"}",c)}if(t.queryParameters&&0<t.queryParameters.length)for(var f=0,p=t.queryParameters;f<p.length;f++){var h=p[f],d=Ot(this,e,h,t.serializer);if(null!=d){if(d=t.serializer.serialize(h.mapper,d,Y(h)),null!=h.collectionFormat)if(h.collectionFormat===N.QueryCollectionFormat.Multi)if(0===d.length)d="";else for(var y in d){var m=d[y];d[y]=null==m?"":m.toString()}else d=d.join(h.collectionFormat);if(!h.skipEncoding)if(Array.isArray(d))for(var y in d)d[y]=encodeURIComponent(d[y]);else d=encodeURIComponent(d);a.setQueryParameter(h.mapper.serializedName||Y(h),d)}}o.url=a.toString();var v=t.contentType||this.requestContentType;if(v&&o.headers.set("Content-Type",v),t.headerParameters)for(var g=0,b=t.headerParameters;g<b.length;g++){var w=b[g],E=Ot(this,e,w,t.serializer);if(null!=E){E=t.serializer.serialize(w.mapper,E,Y(w));var R=w.mapper.headerCollectionPrefix;if(R)for(var T=0,_=Object.keys(E);T<_.length;T++){var P=_[T];o.headers.set(R+P,E[P])}else o.headers.set(w.mapper.serializedName||Y(w),E)}}var S=e.options;if(S){if(S.customHeaders)for(var O in S.customHeaders)o.headers.set(O,S.customHeaders[O]);S.abortSignal&&(o.abortSignal=S.abortSignal),S.timeout&&(o.timeout=S.timeout),S.onUploadProgress&&(o.onUploadProgress=S.onUploadProgress),S.onDownloadProgress&&(o.onDownloadProgress=S.onDownloadProgress)}o.withCredentials=this._withCredentials,function(e,t,r,n){if(n.requestBody&&n.requestBody.mapper){t.body=Ot(e,r,n.requestBody,n.serializer);var o=n.requestBody.mapper,i=o.required,a=o.xmlName,s=o.xmlElementName,u=o.serializedName,l=o.type.name;try{if(null!=t.body||i){var c=Y(n.requestBody);t.body=n.serializer.serialize(o,t.body,c);var f=l===A.Stream;n.isXML?l===A.Sequence?t.body=te(function(e,t){var r;return Array.isArray(e)||(e=[e]),(r={})[t]=e,r}(t.body,s||a||u),{rootName:a||u}):f||(t.body=te(t.body,{rootName:a||u})):f||(t.body=JSON.stringify(t.body))}}catch(e){throw new Error('Error "'+e.message+'" occurred in serializing the payload - '+JSON.stringify(u,void 0,"  ")+".")}}else if(n.formDataParameters&&0<n.formDataParameters.length){t.formData={};for(var p=0,h=n.formDataParameters;p<h.length;p++){var d=h[p],y=Ot(e,r,d,n.serializer);if(null!=y){var m=d.mapper.serializedName||Y(d);t.formData[m]=n.serializer.serialize(d.mapper,y,Y(d))}}}}(this,o,e,t),null==o.streamResponseBody&&(o.streamResponseBody=W(t)),n=this.sendRequest(o).then(function(e){return Nt(e,t.responses[e.status])})}catch(e){n=Promise.reject(e)}var x=r;return x&&n.then(function(e){return x(null,e._response.parsedBody,e._response.request,e._response)}).catch(function(e){return x(e)}),n},Pt);function Pt(e,t){var r,n,o;if(t=t||{},(r=(n=e)&&"function"==typeof n.getToken&&(void 0===n.signRequest||0<n.getToken.length)?new Rt(e):e)&&!r.signRequest)throw new Error("credentials argument needs to implement signRequest method");if(this._withCredentials=t.withCredentials||!1,this._httpClient=t.httpClient||new L,this._requestPolicyOptions=new ie(t.httpPipelineLogger),Array.isArray(t.requestPolicyFactories))o=t.requestPolicyFactories;else if(o=function(e,t){var r=[];t.generateClientRequestIdHeader&&r.push(be(t.clientRequestIdHeaderName));e&&(!function(e){return"function"==typeof e.create}(e)?r.push(Ke(e)):r.push(e));var n=St(t.userAgentHeaderName,_e),o=St(t.userAgent,Pe);n&&o&&r.push(Se({key:n,value:o}));r.push($e()),r.push(function(r){return void 0===r&&(r=30),{create:function(e,t){return new We(e,t,r)}}}(t.rpRegistrationRetryTimeout)),t.noRetryPolicy||(r.push(de()),r.push(rt()),r.push(gt()));r.push(se(t.deserializationContentTypes));var i=t.proxySettings||void 0;i&&r.push(dt());t.agentSettings&&r.push((t.agentSettings,{create:function(e,t){throw lt}}));return r}(r,t),t.requestPolicyFactories){var i=t.requestPolicyFactories(o);i&&(o=i)}this._requestPolicyFactories=o}function St(e,t){var r;return"string"==typeof e?r=e:(r=t(),"function"==typeof e&&(r=e(r))),r}function Ot(e,t,r,n){return function e(t,r,n,o,i){var a;"string"==typeof n&&(n=[n]);if(Array.isArray(n)){if(0<n.length){if(o.isConstant)a=o.defaultValue;else{var s=xt(r,n);s.propertyFound||(s=xt(t,n));var u=!1;s.propertyFound||(u=o.required||"options"===n[0]&&2===n.length),a=u?o.defaultValue:s.propertyValue}var l=X(n,o);i.serialize(o,a,l)}}else for(var c in o.required&&(a={}),n){var f=o.type.modelProperties[c],p=n[c],h=e(t,r,p,f,i),d=X(p,f);i.serialize(f,h,d),void 0!==h&&((a=a||{})[c]=h)}return a}(e,t,r.parameterPath,r.mapper,n)}function xt(e,t){for(var r={propertyFound:!1},n=0;n<t.length;++n){var o=t[n];if(!(null!=e&&o in e))break;e=e[o]}return n===t.length&&(r.propertyValue=e,r.propertyFound=!0),r}function Nt(t,e){function r(e){return Object.defineProperty(e,"_response",{value:t})}var n=t.parsedHeaders,o=e&&e.bodyMapper;if(o){var i=o.type.name;if("Stream"===i)return r(O(O({},n),{blobBody:t.blobBody,readableStreamBody:t.readableStreamBody}));var a="Composite"===i&&o.type.modelProperties||{},s=Object.keys(a).some(function(e){return""===a[e].serializedName});if("Sequence"===i||s){for(var u=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)n[o]=i[a];return n}(Array.isArray(t.parsedBody)?t.parsedBody:[]),l=0,c=Object.keys(a);l<c.length;l++){var f=c[l];a[f].serializedName&&(u[f]=t.parsedBody[f])}if(n)for(var p=0,h=Object.keys(n);p<h.length;p++){u[f=h[p]]=n[f]}return r(u),u}if("Composite"===i||"Dictionary"===i)return r(O(O({},n),t.parsedBody))}return o||"HEAD"===t.request.method?r(O(O({},n),{body:t.parsedBody})):r(O(O({},n),t.parsedBody))}var At,qt=(S(Ct,At=ne),Ct.prototype.sendRequest=function(e){var t=this;return this._nextPolicy.sendRequest(e).then(function(e){return function(e,t){e.logger(">> Request: "+JSON.stringify(t.request,void 0,2)),e.logger(">> Response status code: "+t.status);var r=t.bodyAsText;return e.logger(">> Body: "+r),Promise.resolve(t)}(t,e)})},Ct);function Ct(e,t,r){void 0===r&&(r=console.log);var n=At.call(this,e,t)||this;return n.logger=r,n}var Dt=c.HeaderConstants,It=(Ut.prototype.signRequest=function(e){return e.headers||(e.headers=new d),e.headers.set(Dt.AUTHORIZATION,this.authorizationScheme+" "+this.token),Promise.resolve(e)},Ut);function Ut(e,t){if(void 0===t&&(t="Bearer"),this.authorizationScheme="Bearer",!e)throw new Error("token cannot be null or undefined.");this.token=e,this.authorizationScheme=t}var Ht=c.HeaderConstants,kt=(Mt.prototype.signRequest=function(e){var t=this.userName+":"+this.password,r=this.authorizationScheme+" "+btoa(t);return e.headers||(e.headers=new d),e.headers.set(Ht.AUTHORIZATION,r),Promise.resolve(e)},Mt);function Mt(e,t,r){if(void 0===r&&(r="Basic"),this.authorizationScheme="Basic",null==e||"string"!=typeof e.valueOf())throw new Error("userName cannot be null or undefined and must be of type string.");if(null==t||"string"!=typeof t.valueOf())throw new Error("password cannot be null or undefined and must be of type string.");this.userName=e,this.password=t,this.authorizationScheme=r}var zt=(jt.prototype.signRequest=function(e){if(!e)return Promise.reject(new Error('webResource cannot be null or undefined and must be of type "object".'));if(this.inHeader)for(var t in e.headers||(e.headers=new d),this.inHeader)e.headers.set(t,this.inHeader[t]);if(this.inQuery){if(!e.url)return Promise.reject(new Error("url cannot be null in the request object."));for(var r in e.url.indexOf("?")<0&&(e.url+="?"),this.inQuery)e.url.endsWith("?")||(e.url+="&"),e.url+=r+"="+this.inQuery[r]}return Promise.resolve(e)},jt);function jt(e){if(!e||e&&!e.inHeader&&!e.inQuery)throw new Error('options cannot be null or undefined. Either "inHeader" or "inQuery" property of the options object needs to be provided.');this.inHeader=e.inHeader,this.inQuery=e.inQuery}var Lt,Bt=(S(Ft,Lt=zt),Ft);function Ft(e){if(!e||e&&"string"!=typeof e)throw new Error("topicKey cannot be null or undefined and must be of type string.");var t={inHeader:{"aeg-sas-key":e}};return Lt.call(this,t)||this}var $t,Qt=(S(Vt,$t=zt),Vt);function Vt(e){if(!e||e&&"string"!=typeof e)throw new Error("domainKey cannot be null or undefined and must be of type string.");var t={inHeader:{"aeg-sas-key":e}};return $t.call(this,t)||this}N.WebResource=q,N.DefaultHttpClient=L,N.HttpHeaders=d,N.RestError=M,N.ServiceClient=_t,N.flattenResponse=Nt,N.Constants=c,N.logPolicy=function(r){return void 0===r&&(r=console.log),{create:function(e,t){return new qt(e,t,r)}}},N.BaseRequestPolicy=ne,N.RequestPolicyOptions=ie,N.generateClientRequestIdPolicy=be,N.exponentialRetryPolicy=de,N.systemErrorRetryPolicy=rt,N.throttlingRetryPolicy=gt,N.getDefaultProxySettings=ht,N.proxyPolicy=dt,N.redirectPolicy=$e,N.signingPolicy=Ke,N.userAgentPolicy=Se,N.getDefaultUserAgentValue=Pe,N.deserializationPolicy=se,N.deserializeResponseBody=he,N.MapperType=A,N.Serializer=E,N.serializeObject=function e(t){if(null!=t){if(t instanceof Uint8Array)return t=s(t);if(t instanceof Date)return t.toISOString();if(Array.isArray(t)){for(var r=[],n=0;n<t.length;n++)r.push(e(t[n]));return r}if("object"!=typeof t)return t;var o={};for(var i in t)o[i]=e(t[i]);return o}},N.stripRequest=g,N.stripResponse=v,N.delay=h,N.executePromisesSequentially=function(e,t){var r=Promise.resolve(t);return e.forEach(function(e){r=r.then(e)}),r},N.generateUuid=y,N.encodeUri=function(e){return encodeURIComponent(e).replace(/!/g,"%21").replace(/"/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")},N.promiseToCallback=function(e){if("function"!=typeof e.then)throw new Error("The provided input is not a Promise.");return function(t){e.then(function(e){t(void 0,e)},function(e){t(e)})}},N.promiseToServiceCallback=function(e){if("function"!=typeof e.then)throw new Error("The provided input is not a Promise.");return function(t){e.then(function(e){process.nextTick(t,void 0,e.parsedBody,e.request,e)},function(e){process.nextTick(t,e)})}},N.isValidUuid=p,N.applyMixins=function(r,e){e.forEach(function(t){Object.getOwnPropertyNames(t.prototype).forEach(function(e){r.prototype[e]=t.prototype[e]})})},N.isNode=f,N.isDuration=b,N.URLBuilder=Ce,N.URLQuery=Ae,N.TokenCredentials=It,N.BasicAuthenticationCredentials=kt,N.ApiKeyCredentials=zt,N.TopicCredentials=Bt,N.DomainCredentials=Qt,Object.defineProperty(N,"__esModule",{value:!0})});